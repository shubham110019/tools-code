<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Multi Image Upload & Download</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 2s linear infinite;
            display: none;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>Multi Image Upload & Download</h1>
        <input type="file" id="fileInput" multiple>
        <button onclick="createZip()" class="btn btn-primary">Create ZIP</button>
        <div id="downloadLinkContainer"></div>
        <div id="loader" class="loader"></div>
        <div id="zipSize"></div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.5.0/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <script>
        function createZip() {
            const fileInput = document.getElementById('fileInput');
            const files = fileInput.files;

            if (files.length === 0) {
                alert('Please select at least one image.');
                return;
            }

            const loader = document.getElementById('loader');
            loader.style.display = 'block'; // Show loader while generating zip

            const zip = new JSZip();

            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                zip.file(file.name, file);
            }

            zip.generateAsync({ type: 'blob' }).then(function (content) {
                loader.style.display = 'none'; // Hide loader after zip generation

                const downloadLink = document.createElement('a');
                downloadLink.href = URL.createObjectURL(content);
                downloadLink.download = 'imgtype_zip.zip';
                downloadLink.textContent = 'Click here to download the ZIP file';

                const downloadLinkContainer = document.getElementById('downloadLinkContainer');
                downloadLinkContainer.innerHTML = ''; // Clear previous links
                downloadLinkContainer.appendChild(downloadLink);

                const zipSize = document.getElementById('zipSize');
                const sizeInBytes = content.size;
                const sizeInMB = (sizeInBytes / (1024 * 1024)).toFixed(2);
                zipSize.textContent = `ZIP File Size: ${sizeInMB} MB`;
            });
        }
    </script>
</body>

</html>
